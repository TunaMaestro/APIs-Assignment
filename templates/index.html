{% extends 'base.html' %}

{% block content %}
    <div class="container">
    <h1>The effects of the weather on NSW public transport usage</h1>
    <h2>Dashboard</h2>

        <div class="row">
            <div id="chart"></div>
        </div>

        <script type="text/javascript">
            let graphs = {{ graphJSON | safe }};
            Plotly.plot('chart', graphs, {});
        </script>
    </div>
    {% if error is defined %}
        <div class="alert alert-warning">
            No data for city
        </div>
    {% endif %}
    {% if data is defined %}
        <h2>Current Area Information</h2>
        <table>
            {% for id in definitions %}
                <tr>
                    <th>{{ definitions[id]['label'] }}</th>
                    <td>{{ data[id] }}</td>
                </tr>
            {% endfor %}


        </table>

    {% endif %}

    <p id="reading"></p>




    <script>

        function read() {
            fetch('/reading')
                .then(response => {
                    return response.text();
                })
                .then(text => {
                    document.getElementById('reading').textContent = text;
                });
        }
    </script>




{% endblock %}